"use strict";var __awaiter=this&&this.__awaiter||function(e,c,s,i){return new(s=s||Promise)(function(n,t){function o(e){try{a(i.next(e))}catch(e){t(e)}}function r(e){try{a(i.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(o,r)}a((i=i.apply(e,c||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkPattern=exports.phonePatternInfo=exports.checkAllIndianPatterns=exports.checkOnePattern=void 0;const Constant_1=require("../constant/Constant"),ErrorModel_1=require("../Models/ErrorModel"),validationResult=e=>{const t=[];return e.forEach(e=>{e.country&&2<=e.country.length||t.push(new ErrorModel_1.ErrorModel(Constant_1.ErrorMessage.INVALID_CC,e.country)),e.phone&&e.phone.length>=Constant_1.Phone.MinLength&&e.phone.length<=Constant_1.Phone.MaxLength||t.push(new ErrorModel_1.ErrorModel(Constant_1.ErrorMessage.INVALID_PHONE,e.phone))}),t},phonePatternInfo=(e,t)=>__awaiter(void 0,void 0,void 0,function*(){t.send("Mobile Number Format: [+][country code][area code][local phone number]\nCountry Code: 91\nArea Code: Between 2 to 4\nLocal Phone Number: 6 to 8\nExample: 9760064000, +91-9760064000, 919760064000, +91-(976)0064000, +91-(976)006-4000")}),initialPattern=(exports.phonePatternInfo=phonePatternInfo,e=>{var t=new RegExp(/^[+]?((91-)|(91))?(-| |)?/),e=e.match(t);return null!=e?e[0]:""}),pattern1=e=>new RegExp(/^[\d]{10}$/).test(e),pattern2=e=>{var t=e.search(/(-| )/),n=Constant_1.Phone.NomralLength-t;return 2<=t&&t<=5&&new RegExp("\\b"+("^[\\d]{"+t+"}(-| )[\\d]{"+n+"}$")+"\\b").test(e)},pattern3=e=>new RegExp(/^[\d]{3}(-| )[\d]{3}(-| )[\d]{4}$/).test(e),checkPattern=(t,n=!1)=>__awaiter(void 0,void 0,void 0,function*(){var e=n?initialPattern(t):"",e=t.replace(e,"");return pattern1(e)||pattern2(e)||pattern3(e)}),checkAllIndianPatterns=(exports.checkPattern=checkPattern,(r,a)=>__awaiter(void 0,void 0,void 0,function*(){var e=r.body,t=validationResult(e);if(0<t.length)a.status(500).send(t);else{const n=[];for(const o of e)n.push(yield checkPattern(o.phone,!0));a.send(n)}})),checkOnePattern=(exports.checkAllIndianPatterns=checkAllIndianPatterns,(r,a)=>__awaiter(void 0,void 0,void 0,function*(){var e=[r.body],t=validationResult(e);if(0<t.length)a.status(500).send(t);else{const n=[];for(const o of e)n.push(yield checkPattern(o.phone,!0));a.send(n)}}));exports.checkOnePattern=checkOnePattern;