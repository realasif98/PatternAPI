"use strict";var __awaiter=this&&this.__awaiter||function(t,o,d,s){return new(d=d||Promise)(function(n,e){function a(t){try{r(s.next(t))}catch(t){e(t)}}function i(t){try{r(s.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof d?e:new d(function(t){t(e)})).then(a,i)}r((s=s.apply(t,o||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.pattern1=exports.indianPatternInfo=exports.checkAllIndianPatterns=exports.checkOnePattern=void 0;const Constant_1=require("../constant/Constant");let validationResult=t=>{let e=[];return t.forEach(t=>{t.country&&2<=t.country.length||e.push(Constant_1.ErrorMessage.INVALID_CC),t.phone&&t.phone.length>=Constant_1.Phone.MinLength&&t.phone.length<=Constant_1.Phone.MaxLength||e.push(Constant_1.ErrorMessage.INVALID_PHONE)}),e},validateAllTypesPattern=t=>__awaiter(void 0,void 0,void 0,function*(){return(yield basicPhoneNumberPattern(t))||(yield indianPattern1(t))||(yield indianPattern2(t))||(yield indianPattern3(t))||(yield indianPattern4(t))}),indianPatternInfo=(t,e)=>__awaiter(void 0,void 0,void 0,function*(){e.send("Mobile Number Format: [+][country code][area code][local phone number]\nCountry Code: 91\nArea Code: Between 2 to 4\nLocal Phone Number: 6 to 8\nExample: 9760064000, +91-9760064000, 919760064000, +91-(976)0064000, +91-(976)006-4000")}),initialPattern=(exports.indianPatternInfo=indianPatternInfo,t=>{var e=new RegExp(/^[+]?((91-)|(91))?(-| |)?/),t=t.match(e);return null!=t?t[0]:""}),pattern1=t=>new RegExp(/^[\d]{10}$/).test(t),pattern2=(exports.pattern1=pattern1,t=>{var e=t.search(/(-| )/),n=Constant_1.Phone.NomralLength-e;return 2<=e&&e<=5&&new RegExp("\\b"+("[\\d]{"+e+"}(-| )[\\d]{"+n+"}$")+"\\b").test(t)}),pattern5=t=>new RegExp(/[\d]{3}(-| )[\d]{3}(-| )[\d]{4}$/).test(t),checkPattern=(e,n=!1)=>__awaiter(void 0,void 0,void 0,function*(){if(e.length<8)return!1;var t=n?initialPattern(e):"";return pattern1(e.replace(t,""))}),basicPhoneNumberPattern=e=>__awaiter(void 0,void 0,void 0,function*(){let t=new RegExp(/^([+]?((91)|(91-))?[\d]{10})*$/);return t.test(e)}),indianPattern1=e=>__awaiter(void 0,void 0,void 0,function*(){let t=new RegExp(/^([+]?((91)|(91-))?)?[\d]{2}-[\d]{8}$/);return t.test(e)}),indianPattern2=e=>__awaiter(void 0,void 0,void 0,function*(){let t=new RegExp(/^([+]?((91)|(91-))?)?[\d]{3}-[\d]{7}$/);return t.test(e)}),indianPattern3=e=>__awaiter(void 0,void 0,void 0,function*(){let t=new RegExp(/^([+]?((91)|(91-))?)?[\d]{4}-[\d]{6}$/);return t.test(e)}),indianPattern4=e=>__awaiter(void 0,void 0,void 0,function*(){let t=new RegExp(/^([+]?((91)|(91-))?(-| |)?)?\([\d]{3}\)(-| |)?[\d]{3}(-| |)?[\d]{4}$/);return t.test(e)}),checkAllIndianPatterns=(a,i)=>__awaiter(void 0,void 0,void 0,function*(){var e=a.body,t=validationResult(e);if(0<t.length)i.status(500).send(t);else{let t=[];for(var n of e)t.push(yield validateAllTypesPattern(n.phone));i.send(t)}}),checkOnePattern=(exports.checkAllIndianPatterns=checkAllIndianPatterns,(a,i)=>__awaiter(void 0,void 0,void 0,function*(){var e=[a.body],t=validationResult(e);if(0<t.length)i.status(500).send(t);else{let t=[];for(var n of e)t.push(yield checkPattern(n.phone,!0));i.send(t)}}));exports.checkOnePattern=checkOnePattern;